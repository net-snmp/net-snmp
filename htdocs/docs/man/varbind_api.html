Content-type: text/html

<HTML><HEAD><TITLE>Manpage of VARBIND_API</TITLE>
</HEAD><BODY>
<H1>VARBIND_API</H1>
Section: Net-SNMP (3)<BR>Updated: 20 Apr 2009<BR><A HREF="#index">Index</A>
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

snmp_pdu_add_var, snmp_varlist_add_var, snmp_add_null_var,
snmp_clone_varbind, snmp_free_varbind, snmp_free_var,
print_variable, fprint_variable, snprint_variable,
print_value, fprint_value, snprint_value - varbind_api functions
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:/usr/include/net-snmp/varbind_api.h">net-snmp/varbind_api.h</A>&gt;</B>

<A NAME="lbAD">&nbsp;</A>
<H3>Creation</H3>

<P>

<B>netsnmp_variable_list *snmp_pdu_add_variable(</B>

<BR>

<B>        netsnmp_pdu *</B><I>pdu</I><B>,</B>

<BR>

<B>        const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>        u_char </B><I>type</I><B>, const void *</B><I>value</I><B>, size_t </B><I>len</I><B>);</B>

<BR>

<B>netsnmp_variable_list *snmp_varlist_add_variable(</B>

<BR>

<B>        netsnmp_variable_list *</B><I>varlist</I><B>,</B>

<BR>

<B>        const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>        u_char </B><I>type</I><B>, const void *</B><I>value</I><B>, size_t </B><I>len</I><B>);</B>

<BR>

<B>netsnmp_variable_list *snmp_add_null_var(</B>

<BR>

<B>        netsnmp_pdu *</B><I>pdu</I><B>,</B>

<BR>

<B>        const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>);</B>

<P>

<B>netsnmp_variable_list *snmp_clone_varbind(</B>

<BR>

<B>        netsnmp_variable_list *</B><I>varlist</I><B>);</B>

<A NAME="lbAE">&nbsp;</A>
<H3>Setting Values</H3>

<P>

<B>int  snmp_set_var_objid( netsnmp_variable_list* </B><I>variable</I><B>,</B>

<BR>

<B>                         const oid * </B><I>objid</I><B>, size_t </B><I>objidlen</I><B>);</B>

<BR>

<B>int  snmp_set_var_value( netsnmp_variable_list* </B><I>variable</I><B>,</B>

<BR>

<B>                         const void * </B><I>value</I><B>, size_t </B><I>vallen</I><B>);</B>

<BR>

<B>int  snmp_set_var_typed_value( netsnmp_variable_list* </B><I>variable</I><B>,</B>

<BR>

<B>                         u_char </B><I>type</I><B>,</B>

<BR>

<B>                         const void * </B><I>value</I><B>, size_t </B><I>vallen</I><B>);</B>

<BR>

<B>int  snmp_set_var_typed_integer( netsnmp_variable_list* </B><I>variable</I><B>,</B>

<BR>

<B>                         u_char </B><I>type</I><B>, long </B><I>value</I><B>);</B>

<BR>

<A NAME="lbAF">&nbsp;</A>
<H3>Output</H3>

<P>

<B>void  print_variable(const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                     const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<B>void fprint_variable(FILE *</B><I>fp</I><B>,</B>

<BR>

<B>                     const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                     const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<B>int snprint_variable(char *</B><I>buf</I><B>, size_t </B><I>len</I><B>,</B>

<BR>

<B>                     const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                     const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<P>

<B>void  print_value(const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                  const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<B>void fprint_value(FILE *</B><I>fp</I><B>,</B>

<BR>

<B>                  const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                  const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<B>int snprint_value(char *</B><I>buf</I><B>, size_t </B><I>len</I><B>,</B>

<BR>

<B>                  const oid *</B><I>objid</I><B>, size_t </B><I>objidlen</I><B>,</B>

<BR>

<B>                  const netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<BR>

<A NAME="lbAG">&nbsp;</A>
<H3>Deletion</H3>

<P>

<B>void snmp_free_var(     netsnmp_variable_list *</B><I>variable</I><B>);</B>

<BR>

<B>void snmp_free_varbind( netsnmp_variable_list *</B><I>variables</I><B>);</B>

<BR>

<P>

<A NAME="lbAH">&nbsp;</A>
<H2>DESCRIPTION</H2>

The functions dealing with variable bindings fall into four groups - 
dealing with the creation, setting of values, output and deletion of varbinds.
<A NAME="lbAI">&nbsp;</A>
<H3>Creation</H3>

<B>snmp_pdu_add_variable</B>

will create a new varbind structure, initialised with the name (
<I>objid</I>, <I>objidlen</I>

), syntax (
<I>type</I>

) and value (
<I>value ,  len</I>

) provided.
This varbind is then added to the end of the varbind list in
the given PDU.
<P>

<B>snmp_varlist_add_variable</B>

is similar, but appends the new varbind to the end of the
varbind list provided.
When adding the first varbind to an empty list, simply
pass the address of the head of the list:
<DL COMPACT>
<DT><DD>
&quot;[Insert example code here]&quot;
</DL>
<P>

In both cases, the routine will return a pointer to the new
varbind structure (or NULL if the varbind creation fails).
<P>

<B>snmp_add_null_var</B>

is a convenience function to add an empty varbind to the PDU.
without needing to specify the NULL value explicitly.
This is the normal mechanism for constructing a GET (or similar)
information retrieval request.
<BR>

Again, this returns a pointer to the new varbind, or NULL.
<P>

<B>snmp_clone_varbind</B>

creates a copy of each varbind in the specified list,
returning a pointer to the head of the new list
(or NULL if the cloning fails).
<BR>

<A NAME="lbAJ">&nbsp;</A>
<H3>Setting of values</H3>

<B>snmp_set_var_objid</B>

sets the name of the varbind structure to the specified OID.
<BR>

<B>snmp_set_var_typed_value</B>

sets the syntax type and value of the varbind structure.
<BR>

<B>snmp_set_var_value</B>

sets the value of the varbind structure, leaving the syntax type unchanged.
<BR>

<B>snmp_set_var_typed_integer</B>

is a convenience function to set the syntax type and value for
a 32-bit integer-based varbind.
<P>

All four of these return 0 if the assignment is successful,
or 1 if it is not.
<A NAME="lbAK">&nbsp;</A>
<H3>Output</H3>

<B>print_variable</B>

will take an object identifier (as returned by
<B>read_objid</B>, <B>snmp_parse_oid</B> or <B>get_module_node</B>)

and an instance of such a variable, and prints to the standard output
the textual form of the object identifier together with the value
of the variable.
<P>

<B>fprint_variable</B>

does the same, but prints to the FILE pointer specified by the initial
parameter.
<P>

<B>snprint_variable</B>

prints the same information into the buffer pointed to by
<I>buf</I>

which is of length
<I>len</I>.

It returns the number of characters printed, or -1 if the
buffer was not large enough.  In the latter case,
<I>buf</I>

will typically contained a truncated version of the information (but
this behaviour is not guaranteed).  This function replaces the
obsolete function
<B>sprint_variable</B>.

<P>

<B>print_value</B>,

<B>fprint_value</B>,

and
<B>snprint_value</B>

do the same as the equivalent
<B>print_variable</B>

routines, but only displaying the value of the variable, without the
corresponding object identifier.
<BR>

<A NAME="lbAL">&nbsp;</A>
<H3>Deletion</H3>

<B>snmp_free_var</B>

releases all memory used by the given varbind structure.
<BR>

<B>snmp_free_varbind</B>

releases all memory used by each varbind structure in the varbind list provided.
<BR>

<A NAME="lbAM">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="pdu_api.html>pdu_api</A></B>(3)

<B><A HREF="mib_api.html>mib_api</A></B>(3)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DL>
<DT><A HREF="#lbAD">Creation</A><DD>
<DT><A HREF="#lbAE">Setting Values</A><DD>
<DT><A HREF="#lbAF">Output</A><DD>
<DT><A HREF="#lbAG">Deletion</A><DD>
</DL>
<DT><A HREF="#lbAH">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAI">Creation</A><DD>
<DT><A HREF="#lbAJ">Setting of values</A><DD>
<DT><A HREF="#lbAK">Output</A><DD>
<DT><A HREF="#lbAL">Deletion</A><DD>
</DL>
<DT><A HREF="#lbAM">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 19:05:39 GMT, September 28, 2009
</BODY>
</HTML>
